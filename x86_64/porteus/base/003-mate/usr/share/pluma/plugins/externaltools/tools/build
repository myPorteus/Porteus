#!/bin/sh

# [Pluma Tool]
# Name=Build
# Name[af]=Bou
# Name[am]=መገንቢያ
# Name[ar]=ابنِ
# Name[as]=বিল্ড
# Name[ast]=Construcción
# Name[be]=Пабудаваць
# Name[bg]=Компилиране
# Name[bn]=বিল্ড
# Name[bn_IN]=বিল্ড
# Name[br]=Sevel
# Name[ca]=Construeix
# Name[ca@valencia]=Munta
# Name[cmn]=建立
# Name[crh]=İnşa
# Name[cs]=Sestavit
# Name[cy]=Adeiladu
# Name[da]=Byg
# Name[de]=Alles kompilieren
# Name[dz]=བཟོ་བརྩིགས་
# Name[el]=Χτίσιμο
# Name[en_AU]=Build
# Name[en_GB]=Build
# Name[eo]=Munti
# Name[es]=Construir
# Name[et]=Ehitamine
# Name[eu]=Eraiki
# Name[fi]=Käännös
# Name[fr]=Construire
# Name[ga]=Tóg
# Name[gl]=Compilación
# Name[gu]=Build
# Name[he]=בנייה
# Name[hi]=बिल्ड
# Name[hu]=Összeállítás
# Name[hy]=Կառուցել
# Name[id]=Bangun
# Name[is]=Byggingarútgáfa
# Name[it]=Crea
# Name[ja]=ビルド
# Name[kk]=Жинау
# Name[kn]=ನಿರ್ಮಾಣ
# Name[ko]=빌드하기
# Name[ky]=Чогултуу
# Name[lt]=Sukurti
# Name[lv]=Būvējums
# Name[mai]=निर्मित
# Name[mk]=Изгради
# Name[ml]=ബിള്‍ഡ്
# Name[mr]=बील्ड
# Name[ms]=Binaan
# Name[nb]=Byggversjon
# Name[nds]=Bauen
# Name[ne]=निर्माण गर्नुहोस्
# Name[nl]=Bouwen
# Name[nn]=Bygg
# Name[oc]=Version
# Name[or]=ନିର୍ମାଣ କରନ୍ତୁ
# Name[pa]=Build
# Name[pl]=Zbudowanie
# Name[ps]=جوړول
# Name[pt]=Compilação
# Name[pt_BR]=Compilar
# Name[ro]=Construire
# Name[ru]=Сборка
# Name[si]=සාදන්න
# Name[sk]=Zostavenie
# Name[sl]=Izgradi
# Name[sq]=Gjenero
# Name[sr]=Изгради
# Name[sr@latin]=Izgradi
# Name[sv]=Bygg
# Name[ta]=உருவாக்கு
# Name[te]=బుల్ట్
# Name[th]=ประกอบสร้าง
# Name[tr]=Derle
# Name[uk]=Збірка
# Name[ur]=بِلڈ
# Name[vi]=Xây dựng
# Name[zh_CN]=构建
# Name[zh_HK]=建立
# Name[zh_TW]=建構
# Comment=Run "make" in the document directory
# Comment[am]=ማስኬጃ "መስሪያ" በ ሰነድ ዳይሬክቶሪ ውስጥ
# Comment[ar]=شغّل "make" في دليل المستند
# Comment[as]=আলেখ্যন ধাৰণকাৰী পঞ্জিকাত "make" আদেশ সঞ্চালন কৰক
# Comment[ast]=Executar «make» nel direutoriu del documentu
# Comment[be]=Выканаць "make" у каталогу з дакументам
# Comment[bg]=Стартиране на „make“ в папката на документа
# Comment[bn]=নথি ধারণকারী ডিরেক্টরির মধ্যে "make" কমান্ড সঞ্চালন করুন
# Comment[bn_IN]=ডকুমেন্ট ধারণকারী ডিরেক্টরির মধ্যে "make" কমান্ড সঞ্চালন করুন
# Comment[br]=Erounit "make" e kavlec'hiad an teul
# Comment[ca]=Executa «make» al directori del document
# Comment[ca@valencia]=Executa «make» al directori del document
# Comment[cmn]=在文件資料夾中執行“make”指令
# Comment[crh]=Vesiqa cilbentinde "make" çaptır
# Comment[cs]=Spustit „make” v adresáři dokumentu
# Comment[cy]=Rhedeg "make" yng nghyfeiriadur y ddogfen
# Comment[da]=Start »make« i dokumentmappen
# Comment[de]=»make« im Dokumentenordner ausführen
# Comment[dz]=ཡིག་ཆའི་སྣོད་ཐོ་ནང་ "make" གཡོག་བཀོལ།
# Comment[el]=Εκτέλεση "make" στον κατάλογο εγγράφου
# Comment[en_AU]=Run "make" in the document directory
# Comment[en_GB]=Run "make" in the document directory
# Comment[eo]=Lanĉi "make"-on en la dokumenta dosierujo
# Comment[es]=Ejecutar "make" en el directorio del documento
# Comment[et]=Käsu "make" käivitamine dokumendi kataloogis
# Comment[eu]=Exekutatu "make" dokumentuaren direktorioan
# Comment[fi]=Suorita ”make” asiakirjahakemistossa
# Comment[fr]=Exécuter « make » dans le répertoire du document
# Comment[gl]=Executar «make» no directorio de documentos
# Comment[gu]=દસ્તાવેજ ડિરેક્ટરીમાં "make" ચલાવો
# Comment[he]=הרצת ״make״ בספרייה הנוכחית
# Comment[hi]=दस्तावेज़ निर्देशिका में "make" चलाएँ
# Comment[hr]=Pokreni "make" u direktoriju dokumenta
# Comment[hu]=A „make” futtatása a dokumentum könyvtárában
# Comment[hy]=Փաստաթղթի տեղեկագրքում գործարկել "կատարել"
# Comment[id]=Jalankan "make" di dalam direktori dokumen
# Comment[is]=Keyrðu "make" í möppu skjalsins
# Comment[it]=Esegue «make» nella cartella del documento
# Comment[ja]=文書のあるディレクトリで "make" を実行
# Comment[kk]=Құжат бумасында "make" жөнелту
# Comment[kn]=ದಸ್ತಾವೇಜು ಕೋಶದಲ್ಲಿ "make" ಅನ್ನು ಚಲಾಯಿಸಿ
# Comment[ko]=문서 디렉터리에서 "make"를 실행합니다
# Comment[lt]=Vykdyti „make“ dokumento kataloge
# Comment[lv]=Palaist "make" dokumenta mapē
# Comment[mai]=दस्ताबेज निर्देशिकामे "make" चलाबू
# Comment[mk]=Изврши „make“ во директориумот на документот
# Comment[ml]=രേഖ ഡയറക്ടറിയില്‍ "make" പ്രവര്‍ത്തിപ്പിക്കുക
# Comment[mr]=दस्तऐवज संचयीका मध्ये "make" चालवा
# Comment[ms]=Jalankan "make" dalam direktori dokumen
# Comment[nb]=Kjør "make" i dokumentmappa
# Comment[nds]=Im Dokument-Verteeknis »make« utführen
# Comment[ne]=कागजात डाइरेक्टरीमा "make" चलाउनुहोस्
# Comment[nl]=‘maken’ uitvoeren in de documentmap
# Comment[nn]=Køyr «make» i dokumentmappa
# Comment[or]=ଦଲିଲ ଡିରେକ୍ଟୋରୀରେ  "make"କୁ ଚଲାନ୍ତୁ
# Comment[pa]=ਡੌਕੂਮੈਂਟ਼ ਡਾਇਰੈਕਟਰੀ 'ਚ "make" ਚਲਾਓ
# Comment[pl]=Wykonuje "make" w katalogu dokumentu
# Comment[pt]=Executar "make" no diretório do documento
# Comment[pt_BR]=Executar "make" no diretório do documento
# Comment[ro]=Execută „make” în dosarul documentului
# Comment[ru]=Выполнить «make» в каталоге с документом
# Comment[sk]=Spustiť „make“ v priečinku dokumentu
# Comment[sl]=Zaženi "make" v imeniku dokumenta
# Comment[sq]=Ekzekuton "make" në directory e dokumentit
# Comment[sr]=Покрените „make“ у директоријуму документа
# Comment[sr@latin]=Izvrši naredbu „make“ u fascikli dokumenata
# Comment[sv]=Kör "make" i dokumentkatalogen
# Comment[ta]=ஆவண அடைவில் “make”ஐ இயக்கு
# Comment[te]=నడుపు పత్రము సంచయంలో "తయారు" చేయి
# Comment[th]=เรียก "make" ในไดเรกทอรีของเอกสาร
# Comment[tr]=Belge dizininde "make" çalıştır
# Comment[uk]=Виконати «make» у каталозі з документом
# Comment[ur]=دستاویز کی ڈائریکٹری میں "make" چلائیں
# Comment[vi]=Chạy « make » trong thư mục tài liệu
# Comment[zh_CN]=在文档所在的目录运行“make”
# Comment[zh_HK]=在文件資料夾中執行“make”指令
# Comment[zh_TW]=在文件資料夾中執行「make」指令
# Input=nothing
# Output=output-panel
# Shortcut=<Control>F8
# Applicability=local
# Save-files=nothing
# Languages=

EHOME=`echo $HOME | sed "s/#/\#/"`
DIR=$PLUMA_CURRENT_DOCUMENT_DIR
while test "$DIR" != "/"; do
    for m in GNUmakefile makefile Makefile; do
        if [ -f "${DIR}/${m}" ]; then
            echo "Using ${m} from ${DIR}" | sed "s#$EHOME#~#" > /dev/stderr
            make -C "${DIR}"
            exit
        fi
    done
    DIR=`dirname "${DIR}"`
done
echo "No Makefile found!" > /dev/stderr
